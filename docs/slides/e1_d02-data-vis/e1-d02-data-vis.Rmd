---
title: "rstatsZH - Data Science mit R"
subtitle: "Datenvisualisierung mit ggplot2"  
author: "Lars Schöbitz"
date: "2020-02-14"
output:
  xaringan::moon_reader:
    self_contained: false
    lib_dir: libs
    css: ["default", "../assets/css/xaringan-themer.css", "../assets/css/my-css-style.css"]
    seal: FALSE
    nature:
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
      highlightStyle: solarized-light
      highlightLanguage: ["r", "css", "yaml"]
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---

class: title-slide

```{r child = "../setup.Rmd"}

```

```{r}

library(palmerpenguins)
library(dplyr)
library(ggplot2)

```


# `r rmarkdown::metadata$title`
## `r rmarkdown::metadata$subtitle` 

.bottom[

```{r, echo=FALSE}
p(rmarkdown::metadata$author)
p(rmarkdown::metadata$date)
```
]


---
# Heimarbeit - Hallo Git

.note[

- Was hat gut geklappt?
- Was hat weniger gut geklappt?

]


---
class: middle

# .big[ggplot2 `r emo::ji("heart")` `r emo::ji("penguin")`]

---

## ggplot2 $\in$ tidyverse

.pull-left[
```{r echo=FALSE, out.width="30%"}
knitr::include_graphics("img/ggplot2-part-of-tidyverse.png")
```
] 

.pull-right[ 
- **ggplot2** ist das R Package für Datenvisualisierung im tidyverse 
- Struktur des Codes kann folgerndermassen zusammengefasst werden: 
]

```{r eval = FALSE, echo=TRUE}
ggplot(data = [dataset], 
       mapping = aes(x = [x-variable], 
                     y = [y-variable])) +
  geom_xxx() +
  other options
```

---
## Data: Palmer Penguins

Ein Datensatz über Pinguine Spezies auf Inseln im Palmer Archipelago mit Variablen für Grösse (Flossenlänge, Gewicht, Schnabelmasse), und Geschlecht. 

.pull-left-narrow[
```{r echo=FALSE, out.width="80%"}
knitr::include_graphics("img/penguins.png")
```
]
.pull-right-wide[
```{r}
library(palmerpenguins)
glimpse(penguins)
```
]

---

.panelset[
.panel[.panel-name[Plot]
```{r ref.label = "penguins", echo = FALSE, warning = FALSE, out.width = "90%", fig.width = 8}
```
]
.panel[.panel-name[Code]

```{r penguins, fig.show = "hide", echo=TRUE}
ggplot(data = penguins, 
       mapping = aes(
         x = bill_depth_mm, 
         y = bill_length_mm,
         colour = species)
) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", 
       y = "Bill length (mm)",
       colour = "Species") 
```
]
]

???

Die Funktion `ggplot()` erzeugt hier ein Koordinatensystem, welchem Ebenen hinzugefügt werden. Das erste Argument von ggplot ist der Datenatz, welcher im Diagram verwendet werden soll. 

ggplot(data = penguins) erzeugt ein leeres Diagram. 

Um ein komplettes Diagramm zu erzeugen müssen eine oder mehrere Ebenen hinzugefügt werden, sogenannte geoms, oder geometrische Funktionen. Jede dieser geometrischen Funktionen übernimmt ein Argument `mapping`. Dies definiert wie die Variablen auf visuelle Eigenschaften (aesthetics) abgebildet werden.  

---
class: middle

# .big[Live Code]

---

.note[

- Öffne rstudio.cloud und login
- Öffne deine Email und klicke auf den Link zu deinem persönlichen GitHub repo für **prak-02**
- Bring das Repo in deine lokale Arbeitsumgebung (**Tipp:** "Erste Schritte" für Heimarbeit)
- Sobald ihr soweit seid, hebt eure Hand in Zoom

]

---
class: middle, inverse

# .big[Mapping und Faceting]

---
.pull-left[

.midi[**Mapping:** Grösse, Alpha, Farbe, etc. der Punkte werden basierend auf den Werten der Variable in den Daten bestimmt.]

```{r warning = FALSE, echo=TRUE, out.width = "100%"}
ggplot(penguins,
       aes(x = bill_depth_mm,
           y = bill_length_mm,
           size = body_mass_g, #<<
           color = island)) + #<<
  geom_point()  
```
]
.pull-right[

.midi[**Setting:** Grösse, Alpha, Farbe, etc. der Punkte werden **nicht** basierend auf den Werten der Variable in den Daten bestimmt]

```{r warning = FALSE, echo=TRUE, out.width = "100%"}
ggplot(penguins,
       aes(x = bill_depth_mm,
           y = bill_length_mm)) + 
  geom_point(size = 3, color = "blue") #<<
```
]

---
## Faceting - Zusammenfassung

- `facet_grid()`:
  - 2d grid
  - `rows ~ cols`
  - nutze `.` um nicht zu splitten 
- `facet_wrap()`: 1d wird entsprechend der angegebenen Anzahl von Zeilen und Spalten oder der verfügbaren Plotfläche umbrochen

---
class: inverse, middle

# .big[Live Code]

---

.note[

- Gehe zurück zu prak-02 
- Folge meinen Anweisungen auf dem Bildschirm

]
