---
title: "rstatsZH - Data Science mit R"
subtitle: "Datenvisualisierung verschiedener Datentypen"  
author: "Lars Schöbitz"
date: "2020-03-22"
output:
  xaringan::moon_reader:
    self_contained: false
    lib_dir: libs
    css: ["default", "../assets/css/xaringan-themer.css", "../assets/css/my-css-style.css"]
    seal: FALSE
    nature:
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
      highlightStyle: solarized-light
      highlightLanguage: ["r", "css", "yaml"]
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
editor_options: 
  chunk_output_type: console
---

class: title-slide

```{r child = "../setup.Rmd"}

```

```{r}

library(palmerpenguins)
library(dplyr)
library(readr)
library(ggplot2)

```

```{r, echo=FALSE}

corona_kultur <- read_csv("https://www.web.statistik.zh.ch/ogd/data/ji/fk/kultur_ausfallentschaedigung.csv")

corona_kultur_beschluss_gering <- corona_kultur %>% 
  filter(Beschluss < 100000) 

```




# `r rmarkdown::metadata$title`
## `r rmarkdown::metadata$subtitle` 

.bottom[

```{r, echo=FALSE}
p(rmarkdown::metadata$author)
p(rmarkdown::metadata$date)
```
]

---
class: left
background-image: url(img/review.jpg)
background-position: right
background-size: contain

# Rückblick - Woche 2

**Daten erkunden**

- Über mapping visueller Eigenschaften
- `aes()`
- Über Faceting
- `facet_grid()` - 2 dimensional
- `facet_wrap()` - 1 dimensional
- Mit Funktionen
- `glimpse()`
- `str()`
- `nrow()`
- `ncol()`
- `View()`

.footnote[Photo by: [Annie Spratt](https://unsplash.com/photos/nVrqbvzOh08)]

???

# Ziele für diese Woche

.pull-left[

Am Ende dieser Woche könnt ihr:

- die Farb und Achsenskalierung eines Plots anpassen
- den passenden Plot für eure Daten finden
- einzelne Funktionen des R Package `{dplyr}` anwenden
- beschreiben wie das Symbol `%>%` genutzt wird

.footnote[Photo by: [Ameer Basheer](https://unsplash.com/photos/nVrqbvzOh08)]
]


---
# Hausaufgabe - Hallo OGD

.note[

1. Öffnet eure R Markdown Datei für die Hausaufgabe 2
2. Strickt das Dokument
3. Wer möchte einen Plot aus Übung 3 präsentieren?
4. Wer möchte einen Plot aus Übung 4 präsentieren?

]
---
class: inverse, middle

# .big[Übung 3 - Beispiel]

---


.panelset[
.panel[.panel-name[Plot]
```{r ref.label="corona-kultur", echo=FALSE, warning=FALSE, out.width="100%", fig.width=11}


```
]

.panel[.panel-name[Code]
```{r corona-kultur, fig.show="hide", echo=TRUE}


ggplot(data = corona_kultur_beschluss_gering,
       aes(x = Beschluss, 
           fill = Sparte)) + 
  geom_histogram(binwidth = 10000) +  #<<
  facet_wrap(~Kategorie) +
  scale_fill_brewer(type = "qual", palette = 3) +
  scale_x_continuous(breaks = seq(0, 100000, 10000), #<<
                     labels = seq(0, 100, 10)) + #<<
  labs(title = "Corona Hilfen im Kulturbereich im Kanton Zürich", 
       subtitle = "Verteilung der Beträge kleiner 100'000 CHF nach Kategorie und Sparte", 
       caption = "Daten: opendata.swiss",
       x = "Beschluss in 1000 CHF") + 
  theme(legend.position = "bottom") #<<


```

]
]

---
class: inverse, middle

# .big[Übung 4 - Beispiel]

---
.panelset[
.panel[.panel-name[Plot]
```{r echo=FALSE, fig.width=9, warning=FALSE, out.width="100%", ref.label="corona-kultur-bar"}




```
]

.panel[.panel-name[Code]
```{r corona-kultur-bar, fig.show="hide", echo=TRUE}

ggplot(data = corona_kultur, 
       mapping =  aes(x = Status, 
                      fill = Sparte)) +
  geom_bar() +
  facet_wrap(~Kategorie, nrow = 1) +
  scale_fill_brewer(type = "qual", palette = 3) +
  theme_minimal(base_size = 14) +  #<<
  theme(panel.grid.major.x = element_blank(), #<<
        panel.grid.minor.y = element_blank()) + #<<
  theme(legend.position = "bottom") #<<

```

]
]


